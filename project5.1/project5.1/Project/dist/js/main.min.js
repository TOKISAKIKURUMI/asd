!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./util"),e=a("eventemitter2").EventEmitter2;e.extend=d.extend,b.exports=e},{"./util":5,eventemitter2:6}],2:[function(a,b,c){a("./init");var d=a("./event"),e=function(){this.isStart=!1,this.isStop=!0,this.isResume=!1,this.isPause=!0,this.sprits=[],this.timer=null},f={init:function(){this.emit("init"),this.render()},start:function(){this.isStart=!0,this.isStop=!0,this.resume(),this.emit("start")},stop:function(){this.isStart=!1,this.isStop=!0,this.pause(),this.emit("stop")},pause:function(){this.isPause=!0,this.isResume=!1,this.emit("pause")},resume:function(){this.isResume=!0,this.isPause=!1,this.emit("resume")},render:function(){function a(){var c=b.sprits;b.sprits=[];for(var d=0,e=c.length;e>d;d++){var f=c[d];if(f.isToRemove)b.emit("sprit removed",f),"function"==typeof f._after_remove&&(f._after_remove(),delete f._after_remove);else{var f=c[d];b.sprits.push(f),f.move()}}b.timer=requestAnimationFrame(a)}var b=this;a()},add:function(a){if("function"!=typeof a.move)throw"Sprit should have a `move` function.";a.isToRemove=!1,this.sprits.push(a),this.emit("sprit added",a)},remove:function(a,b){a.isToRemove=!0,a._after_remove=b}};b.exports=d.extend(e,f)},{"./event":1,"./init":3}],3:[function(a,b,c){for(var d=0,e=["webkit","moz"],f=0;f<e.length&&!window.requestAnimationFrame;++f)window.requestAnimationFrame=window[e[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[f]+"CancelAnimationFrame"]||window[e[f]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){var c=(new Date).getTime(),e=Math.max(0,16-(c-d)),f=window.setTimeout(function(){a(c+e)},e);return d=c+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})},{}],4:[function(a,b,c){var d=a("./event"),e=new d;e.images={pool:{},count:0,loadedCount:0},e.images.set=function(a,b,c){var d=new Image;if(e.images.pool[a])throw new Error("id "+a+" existed.");return d.addEventListener("load",function(){d.isLoaded=!0,"function"==typeof c&&(c(d),e.emit("image loaded",d)),e.images.loadedCount++,e.images.loadedCount===e.images.count&&e.emit("all images loaded")}),d.src=b,e.images.pool[a]=d,e.images.count++,d},e.images.get=function(a){return e.images.pool[a]},b.exports=e},{"./event":1}],5:[function(a,b,c){function d(a,b){function c(){a.apply(this,arguments)}function e(){}var f=this;e.prototype=f.prototype,c.prototype=new e;for(var g in b)c.prototype[g]=b[g];return c.prototype.constructor=a,c.name=a.name,c.extend=d,c}function e(a){var b=document.querySelectorAll(a);return 1==b.length?b[0]:b}var f=function(){var a=0;return function(){var b=a,c=a=+new Date;return Math.floor(1e3/(c-b))}}();b.exports={extend:d,$:e,fps:f}},{}],6:[function(a,b,c){!function(a){function b(){this._events={},this._conf&&d.call(this,this._conf)}function d(a){a&&(this._conf=a,a.delimiter&&(this.delimiter=a.delimiter),a.maxListeners&&(this._events.maxListeners=a.maxListeners),a.wildcard&&(this.wildcard=a.wildcard),a.newListener&&(this.newListener=a.newListener),this.wildcard&&(this.listenerTree={}))}function e(a){this._events={},this.newListener=!1,d.call(this,a)}function f(a,b,c,d){if(!c)return[];var e,g,h,i,j,k,l,m=[],n=b.length,o=b[d],p=b[d+1];if(d===n&&c._listeners){if("function"==typeof c._listeners)return a&&a.push(c._listeners),[c];for(e=0,g=c._listeners.length;g>e;e++)a&&a.push(c._listeners[e]);return[c]}if("*"===o||"**"===o||c[o]){if("*"===o){for(h in c)"_listeners"!==h&&c.hasOwnProperty(h)&&(m=m.concat(f(a,b,c[h],d+1)));return m}if("**"===o){l=d+1===n||d+2===n&&"*"===p,l&&c._listeners&&(m=m.concat(f(a,b,c,n)));for(h in c)"_listeners"!==h&&c.hasOwnProperty(h)&&("*"===h||"**"===h?(c[h]._listeners&&!l&&(m=m.concat(f(a,b,c[h],n))),m=m.concat(f(a,b,c[h],d))):m=m.concat(h===p?f(a,b,c[h],d+2):f(a,b,c[h],d)));return m}m=m.concat(f(a,b,c[o],d+1))}if(i=c["*"],i&&f(a,b,i,d+1),j=c["**"])if(n>d){j._listeners&&f(a,b,j,n);for(h in j)"_listeners"!==h&&j.hasOwnProperty(h)&&(h===p?f(a,b,j[h],d+2):h===o?f(a,b,j[h],d+1):(k={},k[h]=j[h],f(a,b,{"**":k},d+1)))}else j._listeners?f(a,b,j,n):j["*"]&&j["*"]._listeners&&f(a,b,j["*"],n);return m}function g(a,b){a="string"==typeof a?a.split(this.delimiter):a.slice();for(var c=0,d=a.length;d>c+1;c++)if("**"===a[c]&&"**"===a[c+1])return;for(var e=this.listenerTree,f=a.shift();f;){if(e[f]||(e[f]={}),e=e[f],0===a.length){if(e._listeners){if("function"==typeof e._listeners)e._listeners=[e._listeners,b];else if(h(e._listeners)&&(e._listeners.push(b),!e._listeners.warned)){var g=i;"undefined"!=typeof this._events.maxListeners&&(g=this._events.maxListeners),g>0&&e._listeners.length>g&&(e._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",e._listeners.length),console.trace())}}else e._listeners=b;return!0}f=a.shift()}return!0}var h=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},i=10;e.prototype.delimiter=".",e.prototype.setMaxListeners=function(a){this._events||b.call(this),this._events.maxListeners=a,this._conf||(this._conf={}),this._conf.maxListeners=a},e.prototype.event="",e.prototype.once=function(a,b){return this.many(a,1,b),this},e.prototype.many=function(a,b,c){function d(){0===--b&&e.off(a,d),c.apply(this,arguments)}var e=this;if("function"!=typeof c)throw new Error("many only accepts instances of Function");return d._origin=c,this.on(a,d),e},e.prototype.emit=function(){this._events||b.call(this);var a=arguments[0];if("newListener"===a&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var c=arguments.length,d=new Array(c-1),e=1;c>e;e++)d[e-1]=arguments[e];for(e=0,c=this._all.length;c>e;e++)this.event=a,this._all[e].apply(this,d)}if("error"===a&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var g;if(this.wildcard){g=[];var h="string"==typeof a?a.split(this.delimiter):a.slice();f.call(this,g,h,this.listenerTree,0)}else g=this._events[a];if("function"==typeof g){if(this.event=a,1===arguments.length)g.call(this);else if(arguments.length>1)switch(arguments.length){case 2:g.call(this,arguments[1]);break;case 3:g.call(this,arguments[1],arguments[2]);break;default:for(var c=arguments.length,d=new Array(c-1),e=1;c>e;e++)d[e-1]=arguments[e];g.apply(this,d)}return!0}if(g){for(var c=arguments.length,d=new Array(c-1),e=1;c>e;e++)d[e-1]=arguments[e];for(var i=g.slice(),e=0,c=i.length;c>e;e++)this.event=a,i[e].apply(this,d);return i.length>0||!!this._all}return!!this._all},e.prototype.on=function(a,c){if("function"==typeof a)return this.onAny(a),this;if("function"!=typeof c)throw new Error("on only accepts instances of Function");if(this._events||b.call(this),this.emit("newListener",a,c),this.wildcard)return g.call(this,a,c),this;if(this._events[a]){if("function"==typeof this._events[a])this._events[a]=[this._events[a],c];else if(h(this._events[a])&&(this._events[a].push(c),!this._events[a].warned)){var d=i;"undefined"!=typeof this._events.maxListeners&&(d=this._events.maxListeners),d>0&&this._events[a].length>d&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}}else this._events[a]=c;return this},e.prototype.onAny=function(a){if("function"!=typeof a)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(a),this},e.prototype.addListener=e.prototype.on,e.prototype.off=function(a,b){if("function"!=typeof b)throw new Error("removeListener only takes instances of Function");var c,d=[];if(this.wildcard){var e="string"==typeof a?a.split(this.delimiter):a.slice();d=f.call(this,null,e,this.listenerTree,0)}else{if(!this._events[a])return this;c=this._events[a],d.push({_listeners:c})}for(var g=0;g<d.length;g++){var i=d[g];if(c=i._listeners,h(c)){for(var j=-1,k=0,l=c.length;l>k;k++)if(c[k]===b||c[k].listener&&c[k].listener===b||c[k]._origin&&c[k]._origin===b){j=k;break}if(0>j)continue;return this.wildcard?i._listeners.splice(j,1):this._events[a].splice(j,1),0===c.length&&(this.wildcard?delete i._listeners:delete this._events[a]),this}(c===b||c.listener&&c.listener===b||c._origin&&c._origin===b)&&(this.wildcard?delete i._listeners:delete this._events[a])}return this},e.prototype.offAny=function(a){var b,c=0,d=0;if(a&&this._all&&this._all.length>0){for(b=this._all,c=0,d=b.length;d>c;c++)if(a===b[c])return b.splice(c,1),this}else this._all=[];return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=function(a){if(0===arguments.length)return!this._events||b.call(this),this;if(this.wildcard)for(var c="string"==typeof a?a.split(this.delimiter):a.slice(),d=f.call(this,null,c,this.listenerTree,0),e=0;e<d.length;e++){var g=d[e];g._listeners=null}else{if(!this._events[a])return this;this._events[a]=null}return this},e.prototype.listeners=function(a){if(this.wildcard){var c=[],d="string"==typeof a?a.split(this.delimiter):a.slice();return f.call(this,c,d,this.listenerTree,0),c}return this._events||b.call(this),this._events[a]||(this._events[a]=[]),h(this._events[a])||(this._events[a]=[this._events[a]]),this._events[a]},e.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof c?c.EventEmitter2=e:window.EventEmitter2=e}()},{}],7:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},q={}.hasOwnProperty;g=a("eventemitter2").EventEmitter2,o=a("./common.coffee"),i=o.HEIGHT,n=o.WIDTH,k=o.RATE,l=4,m=5.5,d=.2,f=2e3,j=.6,h=.9,e=function(a){function b(){b.__super__.constructor.call(this,this),this.x=0,this.y=0,this.vx=l,this.vy=m,this.then=null,this.acc=null,this.bird=null,this.leftBricksPos=[],this.rightBricksPos=[],this.rotateY=0,this.rotateZ=0,this.width=50,this.height=32,this.isRunning=!1,this.FLIPP_DIRCT=-1}return p(b,a),b.prototype.init=function(a,b){return this.bird=a,this.bounds=b,this.bird.width=this.width,this.bird.height=this.height,this.reset(),this.draw(),this.show()},b.prototype.show=function(){return this.bird.style.display="block"},b.prototype.reset=function(){var a;return this.isDie=!0,this.isRunning=!1,this.x=this.CENTER_X=(n-this.bird.width)/2,this.y=this.CENTER_Y=i/2-this.bird.height+10,this.vx=0,this.vy=0,this.rotateZ=0,this.FLIPP_DIRCT=-1,this.leftBricksPos=[],this.rightBricksPos=[],this.turnRight(),this.changeBirdStatus(a=!1),this.bird.className="bird"},b.prototype.revive=function(){return this.isDie=!1,this.isRunning=!0,this.vx=l,this.vy=-m},b.prototype.move=function(){var a,b;if(!this.then)return this.acc=0,this.then=+new Date;for(a=+new Date,b=a-this.then,this.acc+=b;this.acc>k;)this.update(),this.acc-=k;return this.then=a,this.draw()},b.prototype.update=function(){return this.isRunning?this.isDie?this.bounce():(this.updateX(),this.updateY()):this.flipping()},b.prototype.updateX=function(){return this.checkTouchSideBricks(),(this.x>n-this.bird.width||this.x<0)&&(this.x<0?this.x=0:this.x=n-this.bird.width,this.vx=-this.vx,this.vx>0?this.turnRight():this.turnLeft(),this.emit("turn around")),this.x+=this.vx},b.prototype.checkTouchSideBricks=function(){var a,b,c,d,e,f,g;if(this.x<this.bounds.left){if(!(this.vx<0))return;a=this.leftBricksPos}else{if(!(this.x>this.bounds.right-this.bird.width))return;if(!(this.vx>0))return;a=this.rightBricksPos}for(c=0,d=a.length;d>c;c++)if(e=a[c],b=this.bounds.up+e*this.bounds.brickWidth,g=b+this.bounds.brickWidth,b<(f=this.y)&&g>f)return this.die()},b.prototype.bounce=function(){return this.vy+=.5,this.y+=this.vy,this.x+=this.vx,this.rotateZ+=this.vRotateZ,(this.x<0||this.x>n-this.bird.width)&&(this.vx=-this.vx*j,this.x<0?this.x=0:this.x=n-this.bird.width),(this.y<=this.bounds.up||this.y>=this.bounds.down-this.bird.height)&&(this.vy=-this.vy*j,this.vx=this.vx*h,this.y<=this.bounds.up?this.y=this.bounds.up:this.y=this.bounds.down-this.bird.height),this.vRotateZ=15*(this.vx/l)},b.prototype.flipping=function(){var a;return a=10,this.y>=this.CENTER_Y+a?this.FLIPP_DIRCT=-1:this.y<=this.CENTER_Y-a&&(this.FLIPP_DIRCT=1),this.y+=.6*this.FLIPP_DIRCT},b.prototype.updateY=function(){return this.isDie?void 0:(this.y<=this.bounds.up||this.y>=this.bounds.down-this.bird.height?this.die():this.vy+=d,this.y+=this.vy)},b.prototype.turnRight=function(){return this.bird.src="assets/bird.png"},b.prototype.turnLeft=function(){return this.bird.src="assets/bird-left.png"},b.prototype.draw=function(){return this.bird.style.webkitTransform="translate3d("+this.x+"px, "+this.y+"px, 0) rotateY("+this.rotateY+"deg) rotateZ("+this.rotateZ+"deg)"},b.prototype.flip=function(){return this.vy=-m},b.prototype.die=function(){var a;return this.vx=-this.vx/this.vx*5,this.vy=-m,this.vRotateZ=15,this.isDie=!0,this.emit("die"),this.changeBirdStatus(a=!0),this.bounce(),setTimeout(function(a){return function(){return a.emit("die end")}}(this),f)},b.prototype.changeBirdStatus=function(a){return a?this.bird.src="assets/dead-bird.png":this.bird.src="assets/bird.png"},b.prototype.isOnTheGround=function(){return this.y>=this.bounds.down-this.bird.height?!0:!1},b.prototype.moveToGround=function(a){var b;return this.bird.className+=" dead-animation",this.y=this.bounds.down-this.bird.height+10,this.x=this.bounds.left+(this.bounds.right-this.bounds.left)/2-this.bird.width/2-20,this.rotateZ=1840,b=400,setTimeout(function(){return a()},f+b)},b}(g),b.exports=new e},{"./common.coffee":10,eventemitter2:6}],8:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o=function(a,b){function c(){this.constructor=a}for(var d in b)p.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},p={}.hasOwnProperty;d=a("../../lib/util").$,g=a("eventemitter2").EventEmitter2,m=a("./common.coffee"),j=m.WIDTH,h=m.HEIGHT,i=.8,e=20,l=d(".left-wall"),n=d(".right-wall"),f=function(a){function b(){this.leftBrick=null,this.rightBrick=null,this.topBrick=null,this.bottomBrick=null,this.brickWidth=null,this.dist=null,this.bricksCount=3,this.leftBricksPos=null,this.rightBricksPos=null}return o(b,a),b.prototype.init=function(a,b){return this.dist=b,this.brickWidth=a,this.setGroups(dist/2),this.initBricks(a),this.initBottomBricks(),this.initTopBricks(),this.initWalls()},b.prototype.initBricks=function(a){var b,c;return b="#76B1D8",c=e,this.leftBrick=k("left"),this.leftBrick.style.cssText="border-left: "+c+"px solid "+b+";\nborder-top: "+a/2+"px solid transparent;\nborder-bottom: "+a/2+"px solid transparent;",this.rightBrick=k("right"),this.rightBrick.style.cssText="border-right: "+c+"px solid "+b+";\nborder-top: "+a/2+"px solid transparent;\nborder-bottom: "+a/2+"px solid transparent;",this.bottomBrick=k("bottom"),this.bottomBrick.style.cssText="border-bottom: "+c+"px solid "+b+";\nborder-right: "+a/2+"px solid transparent;\nborder-left: "+a/2+"px solid transparent;\ntop: "+-c*i+"px;",this.topBrick=k("top"),this.topBrick.style.cssText="border-top: "+c+"px solid "+b+";\nborder-right: "+a/2+"px solid transparent;\nborder-left: "+a/2+"px solid transparent;\nbottom: "+-c*i+"px;"},b.prototype.setGroups=function(a){return d(".up-ground").style.height=a+"px",d(".down-ground").style.height=a+"px"},b.prototype.initBottomBricks=function(){var a,b,c,e,f,g;for(b=d(".down-ground"),g=[],c=e=0,f=j/this.brickWidth-1;f>=0?f>=e:e>=f;c=f>=0?++e:--e)a=this.bottomBrick.cloneNode(!0),a.style.left=c*this.brickWidth+"px",g.push(b.appendChild(a));return g},b.prototype.initTopBricks=function(){var a,b,c,e,f,g;for(g=d(".up-ground"),f=[],b=c=0,e=j/this.brickWidth-1;e>=0?e>=c:c>=e;b=e>=0?++c:--c)a=this.topBrick.cloneNode(!0),a.style.left=b*this.brickWidth+"px",f.push(g.appendChild(a));return f},b.prototype.getBounds=function(){var a,b,c,d;return d=this.dist/2+e*i,a=h-(this.dist/2+e*i),b=e,c=j-e,{up:d,down:a,left:b,right:c,brickWidth:this.brickWidth}},b.prototype.initWalls=function(){return l.style.height=11*this.brickWidth+"px",l.style.width=e+"px",n.style.height=11*this.brickWidth+"px",n.style.width=e+"px",window.a=this},b.prototype.hideLeft=function(){return this.leftBricksPos=[],l.style.webkitTransform="translate3d("+-e+"px, 0, 0)"},b.prototype.showLeftWithRandomBricks=function(){var a,b,c,d,e,f,g;for(l.innerHTML="",e=[0,1,2,3,4,5,6,7,8,9,10],this.leftBricksPos=[],b=d=1,f=this.bricksCount;f>=1?f>=d:d>=f;b=f>=1?++d:--d)c=Math.floor(Math.random()*e.length),g=e[c],e.splice(c,1),this.leftBricksPos.push(g),a=this.leftBrick.cloneNode(!0),a.style.webkitTransform="translate3d(0, "+g*this.brickWidth+"px, 0)",l.appendChild(a);return this.emit("left bricks change",this.leftBricksPos),l.style.webkitTransform="translate3d(0, 0, 0)"},b.prototype.hideRight=function(){return this.rightBricksPos=[],n.style.webkitTransform="translate3d("+e+"px, 0, 0)"},b.prototype.showRightWithRandomBricks=function(){var a,b,c,d,e,f,g;for(n.innerHTML="",e=[0,1,2,3,4,5,6,7,8,9,10],this.rightBricksPos=[],b=d=1,f=this.bricksCount;f>=1?f>=d:d>=f;b=f>=1?++d:--d)c=Math.floor(Math.random()*e.length),g=e[c],e.splice(c,1),this.rightBricksPos.push(g),a=this.rightBrick.cloneNode(!0),a.style.webkitTransform="translate3d(0, "+g*this.brickWidth+"px, 0)",n.appendChild(a);return this.emit("right bricks change",this.rightBricksPos),n.style.webkitTransform="translate3d(0, 0, 0)"},b}(g),k=function(a){var b;return b=document.createElement("div"),b.className="angle "+a,b},b.exports=new f},{"../../lib/util":5,"./common.coffee":10,eventemitter2:6}],9:[function(a,b,c){var d,e,f,g,h,i,j=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k={}.hasOwnProperty;d=a("../../lib/util").$,f=a("eventemitter2").EventEmitter2,i=a("./common.coffee"),h=i.WIDTH,g=i.HEIGHT,e=function(a){function b(){b.__super__.constructor.call(this,this),this.$candy=d(".candy"),this.width=30,this.height=16,this.isShow=!1,this.x=0,this.y=0}return j(b,a),b.prototype.init=function(a){return this.bounds=a,this.$candy.style.width=this.width+"px",this.$candy.style.height=this.height+"px"},b.prototype.show=function(){return this.$candy.style.display="block",this.isShow=!0},b.prototype.hide=function(){return this.$candy.style.display="none",this.isShow=!1},b.prototype.moveToRandomPos=function(a){var b,c,d;return b=20,c=a?this.bounds.right-this.width-b:this.bounds.left+b,d=this.bounds.up+b+(this.bounds.down-this.bounds.up-this.height-2*b)*Math.random(),this.moveTo(c,d)},b.prototype.moveTo=function(a,b){return this.x=a,this.y=b,this.$candy.style.webkitTransform="translate3d("+a+"px, "+b+"px, 0)"},b}(f),b.exports=new e},{"../../lib/util":5,"./common.coffee":10,eventemitter2:6}],10:[function(a,b,c){var d,e,f,g,h,i;e=document.documentElement.clientHeight,i=document.documentElement.clientWidth,f=568,g=360,e=e>f?f:e,i=i>g?g:i,h=16.7,d=window.navigator.userAgent,b.exports={HEIGHT:e,WIDTH:i,RATE:h,AGENT:d}},{}],11:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m;m=a("../../lib/util"),l=a("./common.coffee"),f=l.HEIGHT,h=l.WIDTH,g=l.RATE,e=l.AGENT,d=m.$,k=d("#debug"),i=e.match(/AppleWebKit\/.+?\s/)[0],j={count:0,move:function(){var a;return a=m.fps(),10===++this.count?(this.count=0,k.innerHTML="<p>width: "+h+", height: "+f+", FPS: "+a+"</p>\n<hr>\n<p>"+i+"</p>"):void 0}},b.exports=j},{"../../lib/util":5,"./common.coffee":10}],12:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;k=a("../../lib/game"),o=a("./bird.coffee"),r=a("./candy.coffee"),u=a("./debug.coffee"),J=a("./states.coffee"),q=a("./bricks.coffee"),F=a("../../lib/r"),N=a("../../lib/util"),t=a("./common.coffee"),l=t.HEIGHT,n=t.WIDTH,d=N.$,w=new k,e=d(".area"),j=d("#score"),f=d("h1.name"),i=d("div.instruction"),h=d("h2.highest-score"),g=d("#highest-score"),H=0,t.turnCount=0,y=0,m="highest-score",w.on("init",function(){return z(),B(),D(),A(),C(),G(),s(),J.change("start")}),z=function(){return e.style.height=l+"px",e.style.width=n+"px"},A=function(){var a;return a=d(".bird"),a.className="bird",e.appendChild(a),o.init(a,q.getBounds()),v(),p(),w.add(o)},C=function(){return r.init(q.getBounds()),o.on("turn around",function(){var a;if(!r.isShow)return r.show(),E()?r.moveToRandomPos():r.moveToRandomPos(a=!0)})},s=function(){return w.add({move:function(){var a,b;if(r.isShow)return b=r.x<o.x+o.width&&o.x<r.x+r.width,a=r.y<o.y+o.height&&o.y<r.y+r.height,b&&a?(H+=3,M(H),r.hide()):void 0}})},p=function(){return o.on("turn around",function(){return H++,t.turnCount++,M(),E()?(q.hideRight(),q.showLeftWithRandomBricks()):(q.hideLeft(),q.showRightWithRandomBricks())}),q.on("left bricks change",function(a){return o.leftBricksPos=a}),q.on("right bricks change",function(a){return o.rightBricksPos=a})},E=function(){return o.vx<0},B=function(){var a,b;return a=35,b=l-13*a,0>b&&(a=Math.floor(l/13),b=0),q.init(a,b)},D=function(){return J.on("start",function(){return H=0,t.turnCount=0,j.style.display="none",M(),q.hideLeft(),q.hideRight(),o.reset(),r.hide(),I()}),J.on("game",function(){return j.style.display="block",o.revive(),x()}),o.on("die end",function(){return J.change("over",H)})},x=function(){return f.style.display="none",h.style.display="none",i.style.display="none"},I=function(){return f.style.display="block",h.style.display="block",i.style.display="block"},v=function(){return window.addEventListener("touchstart",function(){return"game"!==J.state||o.isDie?void 0:o.flip()})},M=function(){return t.score=H,K(H),j.innerHTML=H,H>y?L():void 0},L=function(){return y=H,localStorage.setItem(m,y),g.innerHTML=y},K=function(a){var b;return b=Math.floor(a/10)+3,b>10&&(b=10),q.bricksCount=b},G=function(){return y=localStorage.getItem(m),y=y||0,g.innerHTML=""+y},document.ontouchstart=function(a){return a.preventDefault()},w.init()},{"../../lib/game":2,"../../lib/r":4,"../../lib/util":5,"./bird.coffee":7,"./bricks.coffee":8,"./candy.coffee":9,"./common.coffee":10,"./debug.coffee":11,"./states.coffee":13}],13:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n=function(a,b){function c(){this.constructor=a}for(var d in b)o.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},o={}.hasOwnProperty,p=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};m=a("../../lib/util"),e=a("eventemitter2").EventEmitter2,g=a("./common.coffee"),l=["start","game","over","share"],d=m.$,window.imgUrl=window.location.href.replace(/\w+\.html$/,"")+"assets/dead-bird.png",window.lineLink=window.location.href,window.descContent="千万不要碰到钉子！！",window.shareTitle="别碰钉子！",f=function(a){function b(){b.__super__.constructor.call(this,this),this.$over=d("#over"),this.$share=d("#share"),this.$score=d("#over .score"),this.$rank=d("#over .rank"),this.$bullShit=d("#over .bull-shit"),this.$count=d("#share .count"),this.state="start",this.init()}return n(b,a),b.prototype.init=function(){return this.initOverState(),this.initShareState(),window.addEventListener("touchstart",function(a){return function(){return"start"===a.state?a.change("game"):void 0}}(this))},b.prototype.initOverState=function(){return d("#over div.again").addEventListener("touchstart",function(a){return function(b){return b.stopPropagation(),a.change("start")}}(this)),d("#over div.show-off").addEventListener("touchstart",function(a){return function(){return event.stopPropagation(),a.change("share")}}(this))},b.prototype.initShareState=function(){return d("#share div.back").addEventListener("touchstart",function(a){return function(){return a.$share.style.display="none"}}(this))},b.prototype.change=function(a,b){if(p.call(l,a)<0)throw a+" is not in states";return this.state=a,this.toggleOverState(a,b),"share"===a&&this.showShare(),this.emit(a)},b.prototype.toggleOverState=function(a,b){return"share"!==a?"over"===a?(this.$score.innerHTML=b,this.$rank.innerHTML=i(b),this.$bullShit.innerHTML=h(b),this.$over.style.display="block",window.descContent="千万别碰钉子！",window.shareTitle="我的虐心小鸟得了"+b+"分！！果断来挑战我的鸟啊！"):this.$over.style.display="none":void 0},b.prototype.showShare=function(a){return this.$count.innerHTML=g.score,this.$share.style.display="block"},b}(e),i=function(a){return a>=0&&3>=a?j(6):a>=4&&6>=a?j(8):a>=7&&10>=a?j(10):a>=11&&13>=a?j(21):a>=14&&16>=a?j(32):a>=17&&20>=a?j(43):a>=21&&23>=a?j(50):a>=24&&26>=a?j(62):a>=27&&30>=a?j(69):a>=31&&33>=a?j(73):a>=34&&36>=a?j(79):a>=37&&40>=a?j(85):a>=41&&45>=a?k(5e3,9999):a>=46&&50>=a?k(2e3,4999):a>=51&&55>=a?k(1e3,2999):a>=56&&60>=a?k(700,999):a>=61&&65>=a?k(500,699):a>=65&&70>=a?k(100,499):a>70?k(10,99):void 0},j=function(a){return"打爆了全国"+a+"%的人"},k=function(a,b){return"排在全国"+(a+Math.floor((b-a+1)*Math.random()))+"名"},h=function(a){return 10>=a?"矮油，你也太温柔了吧？！":a>=11&&30>=a?"你做得还不错嘛！":a>=31&&50>=a?"靠！牛逼爆了你！":a>50?"OMG！你这么高分还能不能做朋友啊？":void 0},b.exports=new f},{"../../lib/util":5,"./common.coffee":10,eventemitter2:6}]},{},[12]);